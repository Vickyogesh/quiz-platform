{% extends "ui/base_page.html" %}
{% block subtitle %}{{ _('Quiz') }}{% endblock %}

{% block content_class %}quiz{% endblock %}

{% block header_row %}
<div class="col-md-12">
  <h4> {{ quiz.title }}</h4>
</div>
{% endblock %}

{% block nav_brand %}
  <button type="button" class="btn btn-primary navbar-btn" id="btt-done">
    <span class="glyphicon glyphicon-ok"></span>
    {{  _('Finish') }}
  </button>
{% endblock %}

{% block navbar_collapse %}
  <form class="navbar-form navbar-right" role="search">
    <div class="form-group">
      <label>{{ _('Show answers:') }}</label>
      <div class="btn-group btn-group-sm" data-toggle="buttons">
        <label class="btn btn-default">
          <input type="radio" name="options" id="opt_yes">{{ _('Yes') }}</label>
        <label class="btn btn-default active">
          <input type="radio" name="options" id="opt_no" checked>{{ _('No') }}</label>
      </div>
    </div>
  </form>
{% endblock %}


{% block panel_content %}
  <div id="quiz-content" class="row">
    <div class="col-sm-2 vcenter">
      <div class="img-wrapper">
        <a id="question_image" data-lightbox="image"><img></a>
      </div>
    </div><!--
    --><div id="questions" class="col-sm-10 vcenter">

      <div class="qrow pos2" id="row0">
        <div class="qcell">
          <div class="qrect tbl">
            <div class="hidelong">
              <div id="text"></div>
            </div>
          </div>
        </div>
        <div class="qcell">
          <div class="qrect tbl ansbox">
            <div>
                <img class="img-ans true">
                <img class="img-ans false">
            </div>
          </div>
        </div>
      </div> <!-- row -->

      <div class="qrow pos1"  id="row1">
        <div class="qcell">
          <div class="qrect tbl">
            <div class="hidelong">
              <div id="text"></div>
            </div>
          </div>
        </div>
        <div class="qcell">
          <div class="qrect tbl ansbox">
            <div>
                <img class="img-ans true">
                <img class="img-ans false">
            </div>
          </div>
        </div>
      </div> <!-- row -->

      <div class="qrow pos0"  id="row2">
        <div class="qcell">
          <div class="qrect tbl">
            <div id="text"></div>
          </div>
        </div>
        <div class="qcell">
          <div class="qrect tbl ansbox">
            <div>
                <a href="#"><img class="img-ans true"></a>
                <a href="#"><img class="img-ans false"></a>
            </div>
          </div>
        </div>
      </div> <!-- row -->

      <div class="qrow pos1" id="row3">
        <div class="qcell">
          <div class="qrect tbl">
            <div class="hidelong">
              <div id="text"></div>
            </div>
          </div>
        </div>
        <div class="qcell">
          <div class="qrect tbl ansbox">
            <div>
                <img class="img-ans true">
                <img class="img-ans false">
            </div>
          </div>
        </div>
      </div> <!-- row -->

      <div class="qrow pos2" id="row4">
        <div class="qcell">
          <div class="qrect tbl">
            <div class="hidelong">
              <div id="text"></div>
            </div>
          </div>
        </div>
        <div class="qcell">
          <div class="qrect tbl ansbox">
            <div>
                <img class="img-ans true">
                <img class="img-ans false">
            </div>
          </div>
        </div>
      </div> <!-- row -->
    </div> <!-- /questions -->

    <div class="message-layer" id="msgbox-1"></div>
  </div>
{% endblock %}

{% block styles %}
  {{super()}}
{#  <link rel="stylesheet" href="{{ url_for('.static', filename='css/quiz-bb.css') }}" type="text/css" />#}
{%- endblock %}

{%- block scripts %}
  {{ super() }}
  {% assets "bb.js" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {% endassets %}
  <script type="text/javascript" src="{{ url_for('.static', filename='js/msgbox.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('.static', filename='js/quiz-model.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('.static', filename='js/quiz-view.js') }}"></script>
{% endblock %}

{% block page_script %}
  var quiz = new QuizView({
    el: $(".contentpanel").first(),
    back_url: "{{ back_url }}",
    image_url: "{{ image_url }}",
    quiz_url: "{{ quiz_url }}",
    msgbox_el: $("#msgbox-1"),
    labels: {
      error_send: "{{ _('Error sending answers.') }}",
      error_get: "{{ _('Error getting questions.') }}",
      done: "{{ _('You have answered all the questions!') }}",
      done_info: "{{ _('In this quiz you made errors: %%(errors)s')|safe}}",
      btt_close: "{{ _('Close') }}",
      btt_back: "{{ _('Back to menu') }}",
      btt_quiz_back: "{{ _('Back to quiz') }}",
      btt_restart: "{{ _('Restart') }}",
      btt_try_again: "{{ _('Try again') }}",
      btt_review: "{{ _('Review answers') }}"
    },
    data: {{ quiz|tojson }}
  });
{% endblock %}
